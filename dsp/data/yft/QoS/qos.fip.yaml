TITLE: "regression test for qos"
STACKS:
  device: '192.168.4.12'
  name: 'administrator'
  password: '123456'
  domain: 'default'
  tn_installed: 'True'
COMMANDS:
  - RESOURCE: 'network,create,qos_policies'
    PARAM:
      policy: "--name qos.fip.066.2M --shared False --description fip"
    ID: qos-fip
    EXTRACT: '--QOS-FIP {{qos-fip.policy.id}}'

  - RESOURCE: 'network,create,qos_bandwidth_limit_rules'
    PARAM:
      pid: '{{QOS-FIP}}'
      bandwidth_limit_rule: "--max_kbps 2000"
    ID: bw-eg
    EXTRACT: '--BW-EG {{bw-eg.bandwidth_limit_rule.id}}'
  - RESOURCE: 'network,create,qos_bandwidth_limit_rules'
    PARAM:
      pid: '{{QOS-FIP}}'
      bandwidth_limit_rule: "--max_kbps 2000 --direction ingress"
    ID: bw-ing
  - RESOURCE: 'network,update,floatingips'
    PARAM:
      id: '99094461-c16e-4c2f-8257-e5ed2f0a3307'
      floatingip: '--qos_policy_id {{QOS-FIP}}'
    ID: fip-update
  - RESOURCE: 'network,list,floatingips'
    ID: fip-list-description